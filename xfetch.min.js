((a,b)=>{"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?module.exports=b():a.xf=b()})(this,()=>{function a(b,c){const d=a=>a&&"object"==typeof a;return d(b)&&d(c)?(Object.keys(c).forEach(e=>{const f=b[e],g=c[e];b[e]=Array.isArray(f)&&Array.isArray(g)?f.concat(g):d(f)&&d(g)?a(Object.assign({},f),g):g}),b):c}const b=["get","post","put","patch","delete","head"];class c extends Error{constructor(a){super(a.statusText),this.name="HTTPError",this.response=a}}class d extends Promise{}for(const a of["arrayBuffer","blob","formData","json","text"])d.prototype[a]=function(b){return this.then(b=>b[a]()).then(b||(a=>a))};const{assign:e}=Object,f=a=>a.reduce((a,[b,c])=>(a[b]=c,a),{}),g=(...a)=>b=>a.some(a=>"string"==typeof a?typeof b==a:b instanceof a),h=g("string"),i=g("object"),j=a=>h(a)||i(a),k=a=>{if(!a.ok)throw new c(a);return a},l=(i={})=>{const m=(b,c={})=>{a(c,i);const l=a=>new c.URLSearchParams(a).toString(),m=new c.URL(b,c.baseURI||void 0);if(c.headers?g(c.Headers)(c.headers)&&(c.headers=f([...c.headers.entries()])):c.headers={},c.json)c.body=JSON.stringify(c.json),c.headers["Content-Type"]="application/json";else if(j(c.urlencoded))c.body=h(c.urlencoded)?c.urlencoded:l(c.urlencoded),c.headers["Content-Type"]="application/x-www-form-urlencoded";else if(g(c.FormData,"object")(c.formData)){if(!g(c.FormData)(c.formData)){const a=new c.FormData;for(const[b,d]of Object.entries(c.formData))a.append(b,d);c.formData=a}c.body=c.formData}return c.qs&&(h(c.qs)&&(c.qs=(a=>f([...new c.URLSearchParams(a).entries()]))(c.qs)),m.search=l(e(f([...m.searchParams.entries()]),c.qs))),c.credentials||(c.credentials="same-origin"),d.resolve(c.fetch(m,c).then(k))};for(const a of b)m[a]=(b,c={})=>(c.method=a.toUpperCase(),m(b,c));return m.extend=a=>l(e({},i,a)),m.HTTPError=c,m},m="undefined"!=typeof document,n="undefined"!=typeof self;return n?l({fetch:fetch.bind(self),URL,Response,URLSearchParams,Headers,FormData,baseURI:m?document.baseURI:""}):l()});