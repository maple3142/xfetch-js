((a,b)=>{"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?module.exports=b():a.xf=b()})(this,()=>{const a=["get","post","put","patch","delete","head"];class b extends Error{constructor(a){super(a.statusText),this.name="HTTPError",this.response=a}}class c extends Promise{}for(const a of["arrayBuffer","blob","formData","json","text"])c.prototype[a]=function(b){return this.then(b=>b[a]()).then(b||(a=>a))};const{assign:d}=Object,e=a=>a.reduce((a,[b,c])=>(a[b]=c,a),{}),f=a=>new URLSearchParams(a).toString(),g=a=>e([...new URLSearchParams(a).entries()]),h=a=>{if(!a.ok)throw new b(a);return a},i=(j={})=>{const k=(a,b={})=>{d(b,j);const i=new b.URL(a,b.baseURI||void 0);return b.headers?b.headers instanceof b.Headers&&(b.headers=e([...b.headers.entries()])):b.headers={},b.json?(b.body=JSON.stringify(b.json),b.headers["Content-Type"]="application/json"):b.form&&(b.body=f(b.form),b.headers["Content-Type"]="application/x-www-form-urlencoded"),b.qs&&("string"==typeof b.qs&&(b.qs=g(b.qs)),i.search=f(d(e([...i.searchParams.entries()]),b.qs))),b.credentials||(b.credentials="same-origin"),c.resolve(b.fetch(i,b).then(h))};for(const b of a)k[b]=(a,c={})=>(c.method=b,k(a,c));return k.extend=a=>i(d({},j,a)),k.HTTPError=b,k},j="undefined"!=typeof window&&"undefined"!=typeof document;return j?i({fetch,URL,Request,baseURI:document.baseURI}):i()});